webpackJsonp([1],{"4uiY":function(t,e){},AV7t:function(t,e){},HAPY:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(t){n("VMkw")},null,null).exports,c=n("/ocq"),a=n("//Fk"),l=n.n(a),r=n("woOf"),u=n.n(r),d={name:"HelloWorld",data:function(){return{msg:"会诊同步工具",selectedOrgan:0,hospitals:[],consultLists:[],checkedMeetIds:[],isLoading:!1,pageSize:20,currentPage:1}},mounted:function(){this.serviceUrl="/",this.jsonServiceUrl=this.serviceUrl+"*.jsonRequest",this.getData2()},methods:{getData:function(){this.request("POST",{serviceId:"eh.unLoginSevice",Method:"getUrls"},"").then(function(t){console.log("## data",t)}).catch(function(t){console.log("e2",t)})},getData2:function(){var t=this;this.request("GET","meetClinicService/findTianJinOrgans","").then(function(e){console.log("data",e),t.hospitals=e}).catch(function(t){console.log("e3",t)})},findByOrganIds:function(){var t=this;if(this.selectedOrgan){this.checkedMeetIds=[];var e={organIds:[this.selectedOrgan],start:(this.currentPage-1)*this.pageSize,limit:this.pageSize};this.request("POST","meetClinicService/findByOrganIds",e).then(function(e){t.consultLists=e,e&&e.length||t.showToast("没有记录 !")}).catch(function(t){console.log("e4",t)})}else this.showToast("未选择正确的机构")},senderMeetClinic:function(){var t=this,e=this.checkedMeetIds;this.request("POST","meetClinicService/senderMeetClinic",e).then(function(e){console.log("senderMeetRes",e),609==e.code?(t.showToast(e.msg),t.$dialog.alert("数据同步失败",{okText:"确定"})):200==e.code&&(t.showToast("数据同步成功"),t.pageTurn("refresh"))}).catch(function(t){console.log("e4",t)})},senderMeetClinicAll:function(){var t=this;this.request("POST","meetClinicService/batchSendMeetClinic","").then(function(e){609==e.code?(t.showToast(e.msg),t.$dialog.alert("同步失败",{okText:"确定"})):200==e.code&&(t.showToast("所有数据同步成功!"),t.pageTurn("refresh"))}).catch(function(t){console.log("e5",t)})},selectAll:function(t){var e=this;this.checkedMeetIds=[],t?this.consultLists.forEach(function(t){e.checkedMeetIds.push(t.meetClinicId)}):this.checkedMeetIds=[]},showToast:function(t){this.$toast({title:"提示",content:t,type:"default",onShow:function(){console.log("on toast show")},onHide:function(){console.log("on toast hide")}})},confirmSync:function(){var t=this;this.$dialog.confirm("确定要同步吗",{okText:"确定",cancelText:"取消"}).then(function(){t.senderMeetClinic()}).catch(function(){console.log("Clicked on cancel")})},syncAll:function(){var t=this;this.$dialog.confirm("确定要同步该医院所有的记录吗",{okText:"确定",cancelText:"取消"}).then(function(){t.senderMeetClinicAll()}).catch(function(){console.log("Clicked on cancel")})},pageTurn:function(t){switch(t){case"prev":this.currentPage-=1;break;case"next":this.currentPage+=1;break;default:console.log("刷新")}this.findByOrganIds()},request:function(t,e,n,i){var s=this,o=this;o.isLoading=!0;var c=u()({},i,{method:t,data:n});return c.header=c.header||{"Content-Type":"application/json","X-Service-Id":e.serviceId,"X-Service-Method":e.Method},"GET"==c.method?new l.a(function(t,n){s.$axios({method:c.method,baseURL:s.serviceUrl,url:e,params:c.data}).then(function(e){o.isLoading=!1,t(e.data)}).catch(function(t){o.isLoading=!1,n(t)})}):"POST"==c.method?new l.a(function(t,n){s.$axios({method:c.method,baseURL:s.serviceUrl,url:e,data:c.data}).then(function(e){o.isLoading=!1,t(e.data)}).catch(function(t){o.isLoading=!1,n(t)})}):new l.a(function(t,e){s.$axios({method:c.method,url:s.jsonServiceUrl,headers:c.header,data:s.$qs.stringify(c.data)}).then(function(e){t(e.data.body)}).catch(function(t){e(t)})})}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"consult"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("div",{staticClass:"consult-box "},[n("div",{staticClass:"mar top-tool"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOrgan,expression:"selectedOrgan"}],staticClass:"organSelect",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedOrgan=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:"0"}},[t._v("请选择医院")]),t._v(" "),t._l(t.hospitals,function(e){return n("option",{domProps:{value:e.organId}},[t._v("\n    "+t._s(e.organName)+"\n  ")])})],2),t._v(" "),n("button",{on:{click:t.findByOrganIds}},[t._v("查询")]),t._v(" "),n("button",{attrs:{disabled:!t.checkedMeetIds||!t.checkedMeetIds.length},on:{click:t.confirmSync}},[t._v("同步")])]),t._v(" "),n("p"),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.consultLists&&t.consultLists.length,expression:"consultLists && consultLists.length"}],staticClass:"box"},[n("table",{staticClass:"consult-table mar"},[t._m(0),t._v(" "),t._l(t.consultLists,function(e,i){return n("tr",[n("td",{staticClass:"mini"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedMeetIds,expression:"checkedMeetIds"}],attrs:{type:"checkbox",id:e.meetClinicId},domProps:{value:e.meetClinicId,checked:Array.isArray(t.checkedMeetIds)?t._i(t.checkedMeetIds,e.meetClinicId)>-1:t.checkedMeetIds},on:{change:function(n){var i=t.checkedMeetIds,s=n.target,o=!!s.checked;if(Array.isArray(i)){var c=e.meetClinicId,a=t._i(i,c);s.checked?a<0&&(t.checkedMeetIds=i.concat([c])):a>-1&&(t.checkedMeetIds=i.slice(0,a).concat(i.slice(a+1)))}else t.checkedMeetIds=o}}})]),t._v(" "),n("td",[t._v(" "+t._s(e.meetClinicId)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.doctorName)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.departName)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.organName)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.patientName)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.diagianName)+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.startTime?e.startTime.substring(0,16):"")+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.endTime?e.endTime.substring(0,16):"")+" ")])])})],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.consultLists&&t.consultLists.length,expression:"consultLists && consultLists.length"}],staticClass:"bottom-tool tl"},[n("button",{on:{click:function(e){t.selectAll(!0)}}},[t._v("全选 ")]),t._v(" "),n("button",{on:{click:function(e){t.selectAll(!1)}}},[t._v("全不选 ")])]),t._v(" "),n("div",{staticClass:"pagination"},[n("button",{attrs:{disabled:t.currentPage<=1},on:{click:function(e){t.pageTurn("prev")}}},[t._v("上一页")]),t._v(" "),n("span",{staticClass:"num"},[t._v(t._s(t.currentPage))]),t._v(" "),n("button",{attrs:{disabled:t.consultLists.length<t.pageSize},on:{click:function(e){t.pageTurn("next")}}},[t._v("下一页")])]),t._v(" "),n("p",[n("button",{staticClass:"syncAllBtn",on:{click:function(e){t.syncAll()}}},[t._v("同步该医院所有记录")])])]),t._v(" "),n("div",{staticClass:"footer"})]),t._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th"),t._v(" "),n("th",[t._v("会诊单号")]),t._v(" "),n("th",[t._v("申请医生")]),t._v(" "),n("th",[t._v("申请科室")]),t._v(" "),n("th",[t._v("申请机构")]),t._v(" "),n("th",[t._v("患者")]),t._v(" "),n("th",[t._v("疾病名称")]),t._v(" "),n("th",[t._v("申请时间")]),t._v(" "),n("th",[t._v("结束时间")])])}]};var v=n("VU/8")(d,h,!1,function(t){n("AV7t")},null,null).exports;i.a.use(c.a);var f=new c.a({routes:[{path:"/",name:"HelloWorld",component:v}]}),m=(n("uMhA"),n("HAPY"),n("mtWM")),_=n.n(m),p=n("mw3O"),g=n.n(p);function w(t,e,n){var i=new Date;i.setTime(i.getTime()+3600*Number(n)*1e3),document.cookie=t+"="+escape(e)+(null==n?"":";expires="+i.toGMTString())}function k(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?e[2]:null}function C(t){var e=new Date;e.setTime(e.getTime()-1);var n=k(t);null!=n&&(document.cookie=t+"="+n+";expires="+e.toGMTString())}var T={install:function(t,e){t.prototype.getData=function(){console.log("我是插件中的方法")},t.prototype.$axios=_.a,t.prototype.$qs=g.a,t.prototype.setCookie=w,t.prototype.getCookie=k,t.prototype.delCookie=C}},M={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"sys-loading"}},[e("div",{staticClass:"spinner"},[e("div",{staticClass:"loader-inner line-scale-pulse-out-rapid"},[e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div")])])])}]};var y=n("VU/8")(null,M,!1,function(t){n("nVOU")},null,null).exports,b={install:function(t){t.component("loading",y)}},I=n("7VfX"),S=n.n(I),A={data:function(){return{list:[],title:null,content:null,type:null,isActive:!1,timer:null,onShow:function(){},onHide:function(){}}},computed:{objClass:function(){return this.type?"toast-"+this.type:null}},methods:{show:function(t){var e=t.content,n=t.title,i=t.onShow,s=t.onHide,o=t.type;this.type=o,this.content=e,this.title=n,this.onShow=i,this.onHide=s,this.isActive=!0,this.setTimer()},hide:function(){this.isActive=!1},setTimer:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.isActive=!1},2e3)},onMouseenter:function(){clearTimeout(this.timer)},onMouseleave:function(){this.isActive&&this.setTimer()}},watch:{isActive:function(t){t&&"function"==typeof this.onShow?this.onShow():t||"function"!=typeof this.onHide||this.onHide()}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toast-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"toast",class:t.objClass,on:{mouseenter:t.onMouseenter,mouseleave:t.onMouseleave}},[n("button",{staticClass:"toast-close-button",on:{click:t.hide}},[t._v("×")]),t._v(" "),n("div",{staticClass:"toast-container"},[n("div",{staticClass:"toast-title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"toast-content"},[t._v(t._s(t.content))])])])])},staticRenderFns:[]};var L=n("VU/8")(A,x,!1,function(t){n("4uiY")},null,null).exports,O={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.extend(L),i=null;t.prototype.$toast=function(t){return new l.a(function(s){i||((i=new n).$mount(),document.querySelector(e.container||"body").appendChild(i.$el)),console.log("plugin done"),i.show(t),s()})}}};i.a.use(S.a),i.a.use(b),i.a.use(T),i.a.use(O),i.a.config.productionTip=!1,new i.a({el:"#app",router:f,components:{App:o},template:"<App/>"})},VMkw:function(t,e){},nVOU:function(t,e){},uMhA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d9fe57d41fdb45755d96.js.map